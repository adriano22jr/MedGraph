{"version":3,"file":"rpc-worker-loader.js","sources":["../src/rpc-worker-loader.js"],"sourcesContent":["/* global __webpack_exports__ */\n\nfunction workerSetup() {\n\taddEventListener('message', (e) => {\n\t\tlet { type, method, id, params } = e.data, f, p;\n\t\tif (type==='RPC' && method) {\n\t\t\tif ((f = __webpack_exports__[method])) {\n\t\t\t\tp = Promise.resolve().then( () => f.apply(__webpack_exports__, params) );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp = Promise.reject('No such method');\n\t\t\t}\n\t\t\tp.then(result => {\n\t\t\t\tpostMessage({ type: 'RPC', id, result });\n\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tlet error = { message: e };\n\t\t\t\t\tif (e.stack) {\n\t\t\t\t\t\terror.message = e.message;\n\t\t\t\t\t\terror.stack = e.stack;\n\t\t\t\t\t\terror.name = e.name;\n\t\t\t\t\t}\n\t\t\t\t\tpostMessage({ type: 'RPC', id, error });\n\t\t\t\t});\n\t\t}\n\t});\n\tpostMessage({ type: 'RPC', method: 'ready' });\n}\n\nconst workerScript = '\\n' + Function.prototype.toString.call(workerSetup).replace(/(^.*\\{|\\}.*$|\\n\\s*)/g, '');\n\nexport default function rpcWorkerLoader(content, sourceMap) {\n\tconst callback = this.async();\n\tcallback(null, content + workerScript, sourceMap);\n}\n"],"names":["workerSetup","addEventListener","e","data","type","method","id","params","f","p","__webpack_exports__","Promise","resolve","then","apply","reject","result","postMessage","catch","error","message","stack","name","workerScript","Function","prototype","toString","call","replace","rpcWorkerLoader","content","sourceMap","callback","async"],"mappings":"AAAA;AAEA,SAASA,WAAT,GAAuB;EACtBC,gBAAgB,CAAC,SAAD,EAAY,UAACC,CAAD,EAAO;IAClC,cAAmCA,CAAC,CAACC,IAArC;QAAMC,IAAN,WAAMA,IAAN;QAAYC,MAAZ,WAAYA,MAAZ;QAAoBC,EAApB,WAAoBA,EAApB;QAAwBC,MAAxB,WAAwBA,MAAxB;QAA2CC,CAA3C;QAA8CC,CAA9C;;IACA,IAAIL,IAAI,KAAG,KAAP,IAAgBC,MAApB,EAA4B;MAC3B,IAAKG,CAAC,GAAGE,mBAAmB,CAACL,MAAD,CAA5B,EAAuC;QACtCI,CAAC,GAAGE,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAwB;UAAA,OAAML,CAAC,CAACM,KAAF,CAAQJ,mBAAR,EAA6BH,MAA7B,CAAN;SAAxB,CAAJ;OADD,MAGK;QACJE,CAAC,GAAGE,OAAO,CAACI,MAAR,CAAe,gBAAf,CAAJ;;;MAEDN,CAAC,CAACI,IAAF,CAAO,UAAAG,MAAM,EAAI;QAChBC,WAAW,CAAC;UAAEb,IAAI,EAAE,KAAR;UAAeE,EAAE,EAAFA,EAAf;UAAmBU,MAAM,EAANA;SAApB,CAAX;OADD,EAGEE,KAHF,CAGQ,UAAAhB,CAAC,EAAI;QACX,IAAIiB,KAAK,GAAG;UAAEC,OAAO,EAAElB;SAAvB;;QACA,IAAIA,CAAC,CAACmB,KAAN,EAAa;UACZF,KAAK,CAACC,OAAN,GAAgBlB,CAAC,CAACkB,OAAlB;UACAD,KAAK,CAACE,KAAN,GAAcnB,CAAC,CAACmB,KAAhB;UACAF,KAAK,CAACG,IAAN,GAAapB,CAAC,CAACoB,IAAf;;;QAEDL,WAAW,CAAC;UAAEb,IAAI,EAAE,KAAR;UAAeE,EAAE,EAAFA,EAAf;UAAmBa,KAAK,EAALA;SAApB,CAAX;OAVF;;GATc,CAAhB;EAuBAF,WAAW,CAAC;IAAEb,IAAI,EAAE,KAAR;IAAeC,MAAM,EAAE;GAAxB,CAAX;AACA;;AAED,IAAMkB,YAAY,GAAG,OAAOC,QAAQ,CAACC,SAAT,CAAmBC,QAAnB,CAA4BC,IAA5B,CAAiC3B,WAAjC,EAA8C4B,OAA9C,CAAsD,sBAAtD,EAA8E,EAA9E,CAA5B;AAEe,SAASC,eAAT,CAAyBC,OAAzB,EAAkCC,SAAlC,EAA6C;EAC3D,IAAMC,QAAQ,GAAG,KAAKC,KAAL,EAAjB;EACAD,QAAQ,CAAC,IAAD,EAAOF,OAAO,GAAGP,YAAjB,EAA+BQ,SAA/B,CAAR;AACA;;;;"}