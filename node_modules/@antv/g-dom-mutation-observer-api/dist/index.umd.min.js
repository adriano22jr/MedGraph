!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).G=e.G||{},e.G.DOMMutationObserverAPI={}),e.window.G)}(this,(function(e,t){"use strict";var i,r,n=function(){function e(e,t){this.type=e,this.target=t,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var i=new e(t.type,t.target);return i.addedNodes=t.addedNodes.slice(),i.removedNodes=t.removedNodes.slice(),i.previousSibling=t.previousSibling,i.nextSibling=t.nextSibling,i.attributeName=t.attributeName,i.attributeNamespace=t.attributeNamespace,i.oldValue=t.oldValue,i},e}(),s=0,o=new WeakMap,a=function(){function e(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}return e.prototype.enqueue=function(e){var n=this.observer.records,s=n.length;if(n.length>0){var o=function(e,t){return e===t?e:r&&function(e){return e===r||e===i}(e)?r:null}(n[s-1],e);if(o)return void(n[s-1]=o)}else c.push(this.observer),v||(v=!0,void 0!==t.runtime.globalThis?t.runtime.globalThis.setTimeout(h):h());n[s]=e},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(e){var i=this.options;i.attributes&&e.addEventListener(t.ElementEvent.ATTR_MODIFIED,this,!0),i.childList&&e.addEventListener(t.ElementEvent.INSERTED,this,!0),(i.childList||i.subtree)&&e.addEventListener(t.ElementEvent.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(e){var i=this.options;i.attributes&&e.removeEventListener(t.ElementEvent.ATTR_MODIFIED,this,!0),i.childList&&e.removeEventListener(t.ElementEvent.INSERTED,this,!0),(i.childList||i.subtree)&&e.removeEventListener(t.ElementEvent.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach((function(e){this.removeListeners_(e);for(var t=o.get(e),i=0;t.length>i;i++)if(t[i]===this){t.splice(i,1);break}}),this)},e.prototype.handleEvent=function(e){var s,o;switch(e.stopImmediatePropagation(),e.type){case t.ElementEvent.ATTR_MODIFIED:var a=e.attrName,u=e.relatedNode.namespaceURI;(s=d("attributes",o=e.target)).attributeName=a,s.attributeNamespace=u;var v=e.attrChange===t.MutationEvent.ADDITION?null:e.prevValue;l(o,(function(e){var t;if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(a)||-1!==e.attributeFilter.indexOf(u)))return e.attributeOldValue?(t=v,r||((r=n.copy(i)).oldValue=t,r)):s}));break;case t.ElementEvent.REMOVED:case t.ElementEvent.INSERTED:var c=e.target,h=void 0,f=void 0;e.type===t.ElementEvent.INSERTED?(h=[c],f=[]):(h=[],f=[c]);var b=c.previousSibling,p=c.nextSibling;(s=d("childList",o=e.relatedNode)).addedNodes=h,s.removedNodes=f,s.previousSibling=b,s.nextSibling=p,l(o,(function(e){if(e.childList)return s}))}i=r=void 0},e}(),u=function(){function e(e){this.callback=e,this.nodes=[],this.records=[],this.uid=s++}return e.prototype.observe=function(e,t){if(!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var i,r=o.get(e);r||o.set(e,r=[]);for(var n=0;r.length>n;n++)if(r[n].observer===this){(i=r[n]).removeListeners(),i.options=t;break}i||(i=new a(this,e,t),r.push(i),this.nodes.push(e)),i.addListeners()},e.prototype.disconnect=function(){var e=this;this.nodes.forEach((function(t){for(var i=o.get(t),r=0;i.length>r;r++){var n=i[r];if(n.observer===e){n.removeListeners(),i.splice(r,1);break}}}),this),this.records=[]},e.prototype.takeRecords=function(){var e=this.records;return this.records=[],e},e}();function d(e,t){return i=new n(e,t)}function l(e,t){for(var i=e;i;i=i.parentNode){var r=o.get(i);if(r)for(var n=0;r.length>n;n++){var s=r[n],a=s.options;if(i===e||a.subtree){var u=t(a);u&&s.enqueue(u)}}}}var v=!1,c=[];function h(){v=!1;var e=c;c=[],e.sort((function(e,t){return e.uid-t.uid}));var t=!1;e.forEach((function(e){var i=e.takeRecords();!function(e){e.nodes.forEach((function(t){var i=o.get(t);i&&i.forEach((function(t){t.observer===e&&t.removeTransientObservers()}))}))}(e),i.length&&(e.callback(i,e),t=!0)})),t&&h()}e.MutationObserver=u,e.MutationRecord=n,e.Registration=a}));
//# sourceMappingURL=index.umd.min.js.map
