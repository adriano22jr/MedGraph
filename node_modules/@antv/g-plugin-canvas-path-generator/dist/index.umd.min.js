!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],a):a(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.CanvasPathGenerator={}),t.window.G)}(this,(function(t,a){"use strict";var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},e(t,a)};function r(t,a){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,n,o=e.call(t),i=[];try{for(;(void 0===a||a-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return i}function n(t,a){var e=a.cx,r=a.cy;t.arc(void 0===e?0:e,void 0===r?0:r,a.r,0,2*Math.PI,!1)}function o(t,a){var e=a.cx,r=void 0===e?0:e,n=a.cy,o=void 0===n?0:n,i=a.rx,s=a.ry;if(t.ellipse)t.ellipse(r,o,i,s,0,0,2*Math.PI,!1);else{var c=i>s?i:s,l=i>s?1:i/s,h=i>s?s/i:1;t.save(),t.scale(l,h),t.arc(r,o,c,0,2*Math.PI)}}function i(t,e){var r=e.x1,n=e.y1,o=e.x2,i=e.y2,s=e.markerStart,c=e.markerEnd,l=e.markerStartOffset,h=e.markerEndOffset,f=0,p=0,u=0,v=0,y=0;s&&a.isDisplayObject(s)&&l&&(f=Math.cos(y=Math.atan2(i-n,o-r))*(l||0),p=Math.sin(y)*(l||0)),c&&a.isDisplayObject(c)&&h&&(u=Math.cos(y=Math.atan2(n-i,r-o))*(h||0),v=Math.sin(y)*(h||0)),t.moveTo(r+f,n+p),t.lineTo(o+u,i+v)}function s(t,e){var n=e.markerStart,o=e.markerEnd,i=e.markerStartOffset,s=e.markerEndOffset,c=e.d,l=c.absolutePath,h=c.segments,f=0,p=0,u=0,v=0,y=0;if(n&&a.isDisplayObject(n)&&i){var M=r(n.parentNode.getStartTangent(),2);f=Math.cos(y=Math.atan2((d=M[0])[1]-(T=M[1])[1],d[0]-T[0]))*(i||0),p=Math.sin(y)*(i||0)}if(o&&a.isDisplayObject(o)&&s){var d,T,m=r(o.parentNode.getEndTangent(),2);u=Math.cos(y=Math.atan2((d=m[0])[1]-(T=m[1])[1],d[0]-T[0]))*(s||0),v=Math.sin(y)*(s||0)}for(var P=0;l.length>P;P++){var b=l[P],O=l[P+1],S=0===P&&(0!==f||0!==p),g=(P===l.length-1||O&&("M"===O[0]||"Z"===O[0]))&&0!==u&&0!==v;switch(b[0]){case"M":S?(t.moveTo(b[1]+f,b[2]+p),t.lineTo(b[1],b[2])):t.moveTo(b[1],b[2]);break;case"L":g?t.lineTo(b[1]+u,b[2]+v):t.lineTo(b[1],b[2]);break;case"Q":t.quadraticCurveTo(b[1],b[2],b[3],b[4]),g&&t.lineTo(b[3]+u,b[4]+v);break;case"C":t.bezierCurveTo(b[1],b[2],b[3],b[4],b[5],b[6]),g&&t.lineTo(b[5]+u,b[6]+v);break;case"A":var k=h[P].arcParams,E=k.cx,I=k.cy,x=k.rx,j=k.ry,w=k.startAngle,G=k.endAngle,A=k.xRotation,L=k.sweepFlag;if(t.ellipse)t.ellipse(E,I,x,j,A,w,G,!!(1-L));else{var C=x>j?x:j,D=x>j?1:x/j,_=x>j?j/x:1;t.translate(E,I),t.rotate(A),t.scale(D,_),t.arc(0,0,C,w,G,!!(1-L)),t.scale(1/D,1/_),t.rotate(-A),t.translate(-E,-I)}g&&t.lineTo(b[6]+u,b[7]+v);break;case"Z":t.closePath()}}}function c(t,e){var r=e.markerStart,n=e.markerEnd,o=e.markerStartOffset,i=e.markerEndOffset,s=e.points.points,c=s.length,l=s[0][0],h=s[0][1],f=s[c-1][0],p=s[c-1][1],u=0,v=0,y=0,M=0,d=0;r&&a.isDisplayObject(r)&&o&&(u=Math.cos(d=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]))*(o||0),v=Math.sin(d)*(o||0)),n&&a.isDisplayObject(n)&&i&&(y=Math.cos(d=Math.atan2(s[c-1][1]-s[0][1],s[c-1][0]-s[0][0]))*(i||0),M=Math.sin(d)*(i||0)),t.moveTo(l+(u||y),h+(v||M));for(var T=1;c-1>T;T++){var m=s[T];t.lineTo(m[0],m[1])}t.lineTo(f,p)}function l(t,e){var r=e.markerStart,n=e.markerEnd,o=e.markerStartOffset,i=e.markerEndOffset,s=e.points.points,c=s.length,l=s[0][0],h=s[0][1],f=s[c-1][0],p=s[c-1][1],u=0,v=0,y=0,M=0,d=0;r&&a.isDisplayObject(r)&&o&&(u=Math.cos(d=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]))*(o||0),v=Math.sin(d)*(o||0)),n&&a.isDisplayObject(n)&&i&&(y=Math.cos(d=Math.atan2(s[c-2][1]-s[c-1][1],s[c-2][0]-s[c-1][0]))*(i||0),M=Math.sin(d)*(i||0)),t.moveTo(l+u,h+v);for(var T=1;c-1>T;T++){var m=s[T];t.lineTo(m[0],m[1])}t.lineTo(f+y,p+M)}var h=function(t,a,e){return a>t?a:t>e?e:t};function f(t,a){var e=a.x,n=void 0===e?0:e,o=a.y,i=void 0===o?0:o,s=a.radius,c=a.width,l=a.height,f=c,p=l;if(s&&s.some((function(t){return 0!==t}))){var u=c>0?1:-1,v=l>0?1:-1,y=u+v===0,M=r(s.map((function(t){return h(t,0,Math.min(Math.abs(f)/2,Math.abs(p)/2))})),4),d=M[0],T=M[1],m=M[2],P=M[3];t.moveTo(u*d+n,i),t.lineTo(f-u*T+n,i),0!==T&&t.arc(f-u*T+n,v*T+i,T,-v*Math.PI/2,u>0?0:Math.PI,y),t.lineTo(f+n,p-v*m+i),0!==m&&t.arc(f-u*m+n,p-v*m+i,m,u>0?0:Math.PI,v>0?Math.PI/2:1.5*Math.PI,y),t.lineTo(u*P+n,p+i),0!==P&&t.arc(u*P+n,p-v*P+i,P,v>0?Math.PI/2:-Math.PI/2,u>0?Math.PI:0,y),t.lineTo(n,v*d+i),0!==d&&t.arc(u*d+n,v*d+i,d,u>0?Math.PI:0,v>0?1.5*Math.PI:Math.PI/2,y)}else t.rect(n,i,f,p)}var p=function(t){function h(){var a=t.apply(this,function(t,a,e){if(e||2===arguments.length)for(var r,n=0,o=a.length;o>n;n++)!r&&n in a||(r||(r=Array.prototype.slice.call(a,0,n)),r[n]=a[n]);return t.concat(r||Array.prototype.slice.call(a))}([],r(arguments),!1))||this;return a.name="canvas-path-generator",a}return function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+a+" is not a constructor or null");function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}(h,t),h.prototype.init=function(){var t,e=((t={})[a.Shape.CIRCLE]=n,t[a.Shape.ELLIPSE]=o,t[a.Shape.RECT]=f,t[a.Shape.LINE]=i,t[a.Shape.POLYLINE]=l,t[a.Shape.POLYGON]=c,t[a.Shape.PATH]=s,t[a.Shape.TEXT]=void 0,t[a.Shape.GROUP]=void 0,t[a.Shape.IMAGE]=void 0,t[a.Shape.HTML]=void 0,t[a.Shape.MESH]=void 0,t);this.context.pathGeneratorFactory=e},h.prototype.destroy=function(){delete this.context.pathGeneratorFactory},h}(a.AbstractRendererPlugin);t.Plugin=p}));
//# sourceMappingURL=index.umd.min.js.map
